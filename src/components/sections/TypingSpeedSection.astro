---
// Typing Speed Comparison Section
---

<section class="typing-speed-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Save 6+ hours every week</h2>
      <p class="section-subtitle">With an average of 3,000 words per day, voice dictation saves you over 6 hours per week</p>
    </div>

    <div class="typing-comparison-demo">
      <!-- Left side: Manual typing with typos -->
      <div class="comparison-box manual-typing">
        <div class="comparison-header">
          <svg class="header-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="2" y="4" width="12" height="8" rx="1" stroke="currentColor" stroke-width="1.2" fill="none"/>
            <rect x="3.5" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="5" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="6.5" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="8" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="9.5" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="11" y="6" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="4" y="8" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="5.5" y="8" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="7" y="8" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="8.5" y="8" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="10" y="8" width="1" height="1" rx="0.25" fill="currentColor"/>
            <rect x="5" y="10" width="6" height="1" rx="0.25" fill="currentColor"/>
          </svg>
          Manual typing
        </div>
        <div class="comparison-content">
          <div class="typed-text-container">
            <span class="typed-text"></span>
            <span class="cursor">|</span>
          </div>
        </div>
        <div class="comparison-footer">Average Professional Typer: <span class="wpm-count">71</span> WPM <span class="typo-note">(with 2 typos)</span></div>
      Dictating using Mellon</div>
      
      <!-- Right side: Dictating using Mellon -->
      <div class="comparison-box dictation">
        <div class="comparison-header dictation-header">
          <img src="/icons/microphone.svg" alt="" class="header-icon" width="16" height="16" />
          
        </div>
        <div class="comparison-content">
          <!-- Recording indicator with waveform -->
          <div class="recording-pill">
            <svg class="mic-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="4.5" y="1" width="3" height="5" rx="1.5" stroke="currentColor" stroke-width="1.2" fill="none"/>
              <path d="M2 5.5C2 7.433 3.567 9 5.5 9H6.5C8.433 9 10 7.433 10 5.5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" fill="none"/>
              <line x1="6" y1="9" x2="6" y2="11" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
            </svg>
            <div class="mini-waveform">
              <div class="mini-bar" style="--height: 40%"></div>
              <div class="mini-bar" style="--height: 70%"></div>
              <div class="mini-bar" style="--height: 55%"></div>
              <div class="mini-bar" style="--height: 80%"></div>
              <div class="mini-bar" style="--height: 45%"></div>
              <div class="mini-bar" style="--height: 65%"></div>
              <div class="mini-bar" style="--height: 50%"></div>
              <div class="mini-bar" style="--height: 75%"></div>
            </div>
          </div>
          <!-- Streaming text controlled by JavaScript -->
          <div class="streaming-text-container" id="streaming-text"></div>
        </div>
        <div class="comparison-footer">Mellon Voice: <span class="wpm-count mellon-wpm">150</span> WPM <span class="accuracy-note">(Flawless Accuracy)</span></div>
      </div>
    </div>
  </div>
</section>

<script>
  // Synchronized animation controller
  (function() {
    // Shared state for synchronization
    let manualDone = false;
    let dictationDone = false;
    let isRunning = false;
    let hasStarted = false;
    
    // DOM elements
    let typedText, streamingContainer, recordingPill;
    
    // Intersection Observer
    let observer;
    
    // Manual typing sequence
    const typoSequence = [
      { text: "W", delay: 90 },
      { text: "We", delay: 80 },
      { text: "We ", delay: 70 },
      { text: "We n", delay: 85 },
      { text: "We ne", delay: 75 },
      { text: "We nee", delay: 80 },
      { text: "We need", delay: 85 },
      { text: "We need ", delay: 70 },
      { text: "We need t", delay: 80 },
      { text: "We need to", delay: 85 },
      { text: "We need to ", delay: 70 },
      { text: "We need to s", delay: 90 },
      { text: "We need to sy", delay: 85 },
      { text: "We need to syn", delay: 80 },
      { text: "We need to sync", delay: 85 },
      { text: "We need to synch", delay: 90 },
      { text: "We need to synchr", delay: 85 },
      { text: "We need to synchro", delay: 80 },
      { text: "We need to synchron", delay: 85 },
      { text: "We need to synchroni", delay: 90 },
      { text: "We need to synchroniz", delay: 85 },
      { text: "We need to synchronize", delay: 80 },
      { text: "We need to synchronize ", delay: 70 },
      { text: "We need to synchronize o", delay: 85 },
      { text: "We need to synchronize ou", delay: 80 },
      { text: "We need to synchronize our", delay: 85 },
      { text: "We need to synchronize our ", delay: 70 },
      { text: "We need to synchronize our T", delay: 90 },
      { text: "We need to synchronize our Th", delay: 85 },
      { text: "We need to synchronize our Thp", delay: 90 },
      { text: "We need to synchronize our Thpe", delay: 85 },
      { text: "We need to synchronize our ThpeS", delay: 90 },
      { text: "We need to synchronize our ThpeSc", delay: 85 },
      { text: "We need to synchronize our ThpeScr", delay: 90 },
      { text: "We need to synchronize our ThpeScri", delay: 100 },
      { text: "We need to synchronize our ThpeScrip", delay: 110 },
      { text: "We need to synchronize our ThpeScrip", delay: 400 },
      { text: "We need to synchronize our ThpeScri", delay: 60 },
      { text: "We need to synchronize our ThpeScr", delay: 55 },
      { text: "We need to synchronize our ThpeSc", delay: 55 },
      { text: "We need to synchronize our ThpeS", delay: 55 },
      { text: "We need to synchronize our Thpe", delay: 55 },
      { text: "We need to synchronize our Th", delay: 55 },
      { text: "We need to synchronize our T", delay: 55 },
      { text: "We need to synchronize our Ty", delay: 55 },
      { text: "We need to synchronize our Ty", delay: 85 },
      { text: "We need to synchronize our Typ", delay: 80 },
      { text: "We need to synchronize our Type", delay: 85 },
      { text: "We need to synchronize our TypeS", delay: 90 },
      { text: "We need to synchronize our TypeSc", delay: 85 },
      { text: "We need to synchronize our TypeScr", delay: 90 },
      { text: "We need to synchronize our TypeScri", delay: 85 },
      { text: "We need to synchronize our TypeScrip", delay: 90 },
      { text: "We need to synchronize our TypeScript", delay: 85 },
      { text: "We need to synchronize our TypeScript ", delay: 70 },
      { text: "We need to synchronize our TypeScript h", delay: 85 },
      { text: "We need to synchronize our TypeScript ho", delay: 80 },
      { text: "We need to synchronize our TypeScript hoo", delay: 85 },
      { text: "We need to synchronize our TypeScript hook", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks w", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks wi", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks wit", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with t", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with th", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the K", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Ku", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kub", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kube", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kuber", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubern", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kuberne", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernet", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernete", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes c", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cl", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes clu", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes clus", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes clust", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluste", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster a", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster an", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and e", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and en", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ens", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensu", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensur", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure t", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure th", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the P", delay: 95 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Po", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Pos", delay: 95 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Post", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postg", delay: 95 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postgr", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postgre", delay: 95 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postgres", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postgres", delay: 350 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the Postgre", delay: 55 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreS", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQ", delay: 95 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL d", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL da", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL dat", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL data", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL datab", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL databa", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL databas", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database i", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is a", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is as", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asy", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asyn", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is async", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynch", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchr", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchro", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchron", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchrono", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronou", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronous", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronousl", delay: 90 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously b", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously ba", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously bac", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously back", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backe", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed u", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up b", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by ", delay: 70 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by F", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Fr", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Fri", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Frid", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Frida", delay: 85 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Friday", delay: 80 },
      { text: "We need to synchronize our TypeScript hooks with the Kubernetes cluster and ensure the PostgreSQL database is asynchronously backed up by Friday.", delay: 100 },
    ];
    
    // Dictation words
    const words = [
      { text: 'We', tech: false },
      { text: 'need', tech: false },
      { text: 'to', tech: false },
      { text: 'synchronize', tech: false },
      { text: 'our', tech: false },
      { text: 'TypeScript', tech: true },
      { text: 'hooks', tech: false },
      { text: 'with', tech: false },
      { text: 'the', tech: false },
      { text: 'Kubernetes', tech: true },
      { text: 'cluster', tech: false },
      { text: 'and', tech: false },
      { text: 'ensure', tech: false },
      { text: 'the', tech: false },
      { text: 'PostgreSQL', tech: true },
      { text: 'database', tech: false },
      { text: 'is', tech: false },
      { text: 'asynchronously', tech: true },
      { text: 'backed', tech: false },
      { text: 'up', tech: false },
      { text: 'by', tech: false },
      { text: 'Friday.', tech: false },
    ];
    
    let manualIndex = 0;
    let dictationIndex = 0;
    
    // Check if both are done, then restart both together
    function checkAndRestart() {
      if (manualDone && dictationDone) {
        // Both done - wait 2 seconds then restart both
        setTimeout(() => {
          // Clear both
          if (typedText) typedText.textContent = '';
          if (streamingContainer) streamingContainer.innerHTML = '';
          
          // Reset state
          manualDone = false;
          dictationDone = false;
          manualIndex = 0;
          dictationIndex = 0;
          
          // Show recording pill
          if (recordingPill) recordingPill.style.opacity = '1';
          
          // Restart both together
          runManualTyping();
          runDictation();
        }, 2000);
      }
    }
    
    // Manual typing animation
    function runManualTyping() {
      if (manualIndex < typoSequence.length) {
        typedText.textContent = typoSequence[manualIndex].text;
        manualIndex++;
        setTimeout(runManualTyping, typoSequence[manualIndex - 1].delay);
      } else {
        // Done - mark complete and check
        manualDone = true;
        checkAndRestart();
      }
    }
    
    // Dictation streaming animation
    function runDictation() {
      if (dictationIndex < words.length) {
        const span = document.createElement('span');
        span.textContent = words[dictationIndex].text;
        span.className = 'streaming-word visible' + (words[dictationIndex].tech ? ' tech-term' : '');
        streamingContainer.appendChild(span);
        dictationIndex++;
        setTimeout(runDictation, 220);
      } else {
        // Done - hide recording pill, mark complete and check
        if (recordingPill) recordingPill.style.opacity = '0';
        dictationDone = true;
        checkAndRestart();
      }
    }
    
    // Start the animation
    function startAnimation() {
      if (!typedText || !streamingContainer) return;
      if (isRunning) return; // Prevent double init
      isRunning = true;
      hasStarted = true;
      
      // Reset state
      manualDone = false;
      dictationDone = false;
      manualIndex = 0;
      dictationIndex = 0;
      
      // Clear any existing content
      typedText.textContent = '';
      streamingContainer.innerHTML = '';
      
      // Start both together after small delay
      setTimeout(() => {
        runManualTyping();
        runDictation();
      }, 500);
    }
    
    // Initialize and set up Intersection Observer
    function init() {
      typedText = document.querySelector('.typed-text');
      streamingContainer = document.getElementById('streaming-text');
      recordingPill = document.querySelector('.recording-pill');
      
      if (!typedText || !streamingContainer) return;
      
      // Set up Intersection Observer to detect when section is visible
      observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting && !hasStarted) {
            // Section is now visible, start the animation
            startAnimation();
          }
        });
      }, {
        root: null, // Use viewport
        rootMargin: '0px',
        threshold: 0.3 // Trigger when 30% of the section is visible
      });
      
      // Observe the typing comparison demo container
      const demoContainer = document.querySelector('.typing-comparison-demo');
      if (demoContainer) {
        observer.observe(demoContainer);
      }
    }
    
    // Cleanup function
    function cleanup() {
      if (observer) {
        observer.disconnect();
        observer = null;
      }
    }
    
    // Start on page load - but animation will wait for intersection
    document.addEventListener('DOMContentLoaded', init);
    document.addEventListener('astro:page-load', () => {
      // Reset state for astro page transitions
      hasStarted = false;
      isRunning = false;
      cleanup();
      init();
    });
    
    // Cleanup on page unload
    document.addEventListener('astro:before-swap', cleanup);
  })();
</script>

<style>
  /* ========== TYPING SPEED SECTION ========== */
  .typing-speed-section {
    padding: var(--space-4xl) 0;
    background: var(--color-bg-primary);
  }

  /* Section Header */
  .section-header {
    text-align: center;
    margin-bottom: var(--space-3xl);
  }

  .section-title {
    font-size: 40px;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.02em;
    color: var(--color-text-primary);
    margin-bottom: var(--space-md);
  }

  .section-subtitle {
    font-size: 18px;
    color: var(--color-text-secondary);
    line-height: 1.6;
    max-width: 600px;
    margin: 0 auto;
  }

  /* Typing Comparison Demo */
  .typing-comparison-demo {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
    max-width: 1100px;
    margin: 0 auto;
    align-items: stretch;
  }

  .comparison-box {
    background: var(--color-bg-secondary);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .comparison-header {
    padding: var(--space-md) var(--space-lg);
    border-bottom: 1px solid var(--color-gray-300);
    font-size: 15px;
    font-weight: 500;
    color: var(--color-text-secondary);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-xs);
  }

  .header-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  .dictation-header {
    color: var(--color-text-primary);
    font-weight: 600;
  }

  .comparison-content {
    padding: var(--space-lg);
    min-height: 220px;
    display: flex;
    flex-direction: column;
    position: relative;
    flex: 1;
    background: var(--color-bg-tertiary);
  }

  .comparison-footer {
    padding: var(--space-md) var(--space-lg);
    border-top: 1px solid var(--color-gray-300);
    font-size: 14px;
    color: var(--color-text-secondary);
    text-align: center;
    min-height: 52px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    flex-wrap: wrap;
  }

  .wpm-count {
    font-size: 22px;
    font-weight: 700;
    color: var(--color-text-primary);
  }

  .mellon-wpm {
    color: #34c759;
  }

  .typo-note {
    color: #ef4444;
    font-weight: 500;
    font-size: 13px;
  }

  .accuracy-note {
    color: #34c759;
    font-weight: 600;
    font-size: 13px;
  }

  /* Manual typing animation */
  .typed-text-container {
    font-size: 16px;
    line-height: 1.7;
    color: var(--color-text-primary);
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', system-ui, sans-serif;
    min-height: 100px;
    flex: 1;
    /* Add top spacing to align with Mellon side (which has recording pill above text) */
    padding-top: 40px;
  }

  .typed-text {
    display: inline;
  }

  .cursor {
    display: inline;
    animation: blink 0.7s step-end infinite;
    color: var(--color-text-primary);
    font-weight: 300;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  /* Recording pill with waveform - Dynamic Island style */
  .recording-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: #1a1a1a;
    border: none;
    padding: 6px 14px;
    border-radius: 100px;
    margin-bottom: var(--space-md);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: opacity 0.3s ease-out;
  }

  .mic-icon {
    width: 12px;
    height: 12px;
    color: #FF9500;
    flex-shrink: 0;
  }

  .mini-waveform {
    display: flex;
    align-items: center;
    gap: 2px;
    height: 16px;
  }

  .mini-bar {
    width: 3px;
    background: #FF9500;
    border-radius: 2px;
    height: var(--height);
    animation: mini-bar-pulse 0.6s ease-in-out infinite;
  }

  .mini-bar:nth-child(1) { animation-delay: 0s; }
  .mini-bar:nth-child(2) { animation-delay: 0.08s; }
  .mini-bar:nth-child(3) { animation-delay: 0.16s; }
  .mini-bar:nth-child(4) { animation-delay: 0.24s; }
  .mini-bar:nth-child(5) { animation-delay: 0.32s; }
  .mini-bar:nth-child(6) { animation-delay: 0.4s; }
  .mini-bar:nth-child(7) { animation-delay: 0.48s; }
  .mini-bar:nth-child(8) { animation-delay: 0.56s; }

  @keyframes mini-bar-pulse {
    0%, 100% { 
      height: 25%; 
      opacity: 0.5;
    }
    50% { 
      height: var(--height);
      opacity: 1;
    }
  }

  /* Streaming text - JS controlled */
  .streaming-text-container {
    font-size: 16px;
    line-height: 1.7;
    color: var(--color-text-primary);
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', system-ui, sans-serif;
    min-height: 100px;
    display: flex;
    flex-wrap: wrap;
    gap: 0.25em;
    align-content: flex-start;
    flex: 1;
  }

  .streaming-word {
    opacity: 0;
    transform: translateY(4px);
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
  }

  .streaming-word.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .tech-term {
    font-weight: 600;
    color: #1a1a1a;
  }

  /* ========== RESPONSIVE ========== */
  @media (max-width: 968px) {
    .section-title {
      font-size: 32px;
    }

    .section-subtitle {
      font-size: 16px;
    }

    .typing-comparison-demo {
      grid-template-columns: 1fr;
      gap: var(--space-lg);
    }

    .comparison-content {
      min-height: 180px;
    }

    .comparison-header,
    .comparison-footer {
      font-size: 14px;
    }
  }

  @media (max-width: 768px) {
    .typing-speed-section {
      padding: var(--space-3xl) 0;
    }

    .section-title {
      font-size: 28px;
    }

    .section-subtitle {
      font-size: 15px;
    }

    .typed-text-container,
    .streaming-text-container {
      font-size: 15px;
    }

    .comparison-content {
      min-height: 160px;
      padding: var(--space-md);
    }

    .comparison-header {
      font-size: 13px;
      padding: 10px var(--space-md);
    }

    .comparison-footer {
      font-size: 13px;
      padding: 10px var(--space-md);
    }

    .wpm-count {
      font-size: 18px;
    }
  }

  @media (max-width: 480px) {
    .typing-speed-section {
      padding: var(--space-2xl) 0;
    }

    .section-title {
      font-size: 24px;
    }

    .section-subtitle {
      font-size: 14px;
    }

    .typed-text-container,
    .streaming-text-container {
      font-size: 14px;
    }

    .comparison-content {
      min-height: 140px;
      padding: var(--space-sm);
    }

    .comparison-header {
      font-size: 12px;
      padding: 8px var(--space-sm);
    }

    .comparison-footer {
      font-size: 12px;
      padding: 8px var(--space-sm);
      flex-direction: column;
      gap: 2px;
    }

    .wpm-count {
      font-size: 16px;
    }

    .typo-note,
    .accuracy-note {
      font-size: 11px;
    }

    .recording-pill {
      padding: 4px 10px;
    }

    .mini-bar {
      width: 2px;
    }
  }
</style>
